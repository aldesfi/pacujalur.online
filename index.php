<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Undian Pacu Jalur Event Nasional Tepian Narosa | Kuantan Singingi</title>

  <!-- Meta SEO -->
  <meta name="description" content="Ikuti Undian Pacu Jalur Event Nasional Tepian Narosa, Kecamatan Kuantan Tengah, Kabupaten Kuantan Singingi. Acara budaya terbesar di Riau dengan tradisi balap jalur yang mendunia. Saksikan juga live streaming viral Pacu Jalur langsung dari Tepian Narosa. Link Nonton Live Streaming Festival Pacu Jalur 2025 Hari Ini">
  <meta name="keywords" content="Pacu Jalur, Event Nasional, Tepian Narosa, Kuantan Tengah, Kuantan Singingi, Budaya Riau, Undian Pacu Jalur, Live Streaming Pacu Jalur, Pacu Jalur Viral, Link Nonton Live Streaming Festival Pacu Jalur 2025 Hari Ini">
  <meta name="author" content="Pacu Jalur Tepian Narosa">

  <!-- Open Graph (Facebook & WhatsApp) -->
  <meta property="og:title" content="Undian Pacu Jalur Event Nasional Tepian Narosa">
  <meta property="og:description" content="Event budaya terbesar di Riau: Pacu Jalur Tepian Narosa, Kuantan Tengah, Kuantan Singingi. Ikuti undian sekarang.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.pacujalur.online/">
  <meta property="og:image" content="https://www.pacujalur.online/logo.png">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Undian Pacu Jalur Event Nasional Tepian Narosa">
  <meta name="twitter:description" content="Ikuti Undian Pacu Jalur Event Nasional Tepian Narosa, acara budaya terbesar di Kuantan Singingi.">
  <meta name="twitter:image" content="https://www.pacujalur.online/logo.png">

  <!-- Favicon -->
  <link rel="icon" href="logo.png" type="image/x-icon">
</title>

  <style>
    body { 
      background: #f5f7fa;
  
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      margin: 0;
      padding: 10px;
    }
    h2 { text-align: center; }
    table { 
      width: 100%; border-collapse: collapse; margin-top: 5px;
   background-size: cover;
   background-position: center;
     }
    th, td { border: 1px solid #ccc; padding: 4px; text-align: left; }
    th { background: #f2f2f2; }
    input, select { padding: 8px; margin: 5px; }

  #content {
    position: relative;
    padding: 40px;
    background: white;
  }

  #content::before {
    content: "pacujalur 2025";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-30deg);
    font-size: 70px;
    color: rgba(150, 150, 150, 0.2); /* abu muda + transparan */
    white-space: nowrap;
    pointer-events: none; /* supaya tidak ganggu klik */
    z-index: 0; /* tetap di belakang */
  }

  #content * {
    position: relative;
    z-index: 1; /* isi konten di atas watermark */
  }
   h2 {
      font-size: 2rem;
      font-weight: 600;
      margin: 10px 0;
      background: linear-gradient(90deg, #ff9800, #e91e63, #3f51b5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 2px;
      text-transform: uppercase;
      position: relative;
      display: inline-block;
    }

    h2::after {
      content: "";
      display: block;
      width: 80%;
      height: 4px;
      margin: 6px auto 0;
      border-radius: 4px;
      background: linear-gradient(90deg, #ff9800, #e91e63, #3f51b5);
      animation: glow 2s infinite alternate;
    }
     th {
      background-color: #333;
      color: white;
    }
     /* Baris genap */
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    /* Baris ganjil */
    tr:nth-child(odd) {
      background-color: #ffffff;
    }
    .ditandai{
      background-color: #ff5100ff;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }
    .ditandai_admin{
      background-color: #0077ffff;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }
    /* Hover efek */
    tr:hover {
      background-color: #d1e7fd;
    }

    @keyframes glow {
      from { opacity: 0.5; }
      to { opacity: 1; }
    }
</style>
</head>
<body >

    
<h2>
  <img src="logo_big.png" alt="Logo" style="width: 20%; display: block; margin: 0 auto;">
  UNDIAN PACU JALUR EVENT NASIONAL TAHUN 2025 <br>
  TEPIAN NAROSA, KAB. KUANTAN SINGINGI
</h2>

  <!-- Filter -->
  <div>
  
  <input type="text" id="searchNama" onkeyup="filterTable()" placeholder="Cari Nama Jalur...">
  <select id="filterAsal" onchange="filterTable()">
  <option value="">-- Semua (Asal) --</option>
  <option value="INM">Inuman</option>
  <option value="INHU">Indragiri Hulu</option>
  <option value="PGN">Pangean</option>
  <option value="KT">Kuantan Tengah</option>
  <option value="KH">Kuantan Hilir</option>
  <option value="GT">Gunung Toar</option>
  <option value="KM">Kuantan Mudik</option>
  <option value="HK">Hulu Kuantan</option>
  <option value="SR">Sentajo Raya</option>
  <option value="CRT">Cerenti</option>
  <option value=" KHS">Kuantan Hilir Seberang</option>
  <option value="BNI">Benai</option>
  <option value="PCR">Pucuk Rantau</option>
  <option value="SGG">Singingi</option>
  <option value="SBR">Sumatra Barat</option>
  <option value="LTD">Logas Tanah Darat</option>
    <!-- asal lain bisa ditambah -->
  </select>

<button onclick="generatePDF()" class="btn-download">Unduh PDF</button>
<button id="aktif_lidi" onclick="munculkanCheck()" class="btn-download">Pakai Lidi</button>
<button id="reset_lidi" onclick="resetCheck()" class="btn-download" style="display: none;">Reset Lidi</button>
<button id="hasil.php" onclick="window.location.href='hasil.php'" class="btn-download">Hasil</button>

<script>
  function resetCheck() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    const namaElements = document.querySelectorAll('[id^="namaKiri-"], [id^="namaKanan-"]');
    const asalElements = document.querySelectorAll('[id^="asalKiri-"], [id^="asalKanan-"]');
    const noElements = document.querySelectorAll('[id^="noKiri-"], [id^="noKanan-"]');
    localStorage.clear(); // Hapus semua data di localStorage
    checkboxes.forEach(checkbox => {
      checkbox.checked = false;
      checkbox.classList.remove('ditandai');
    });
    namaElements.forEach(element => {
      element.classList.remove('ditandai');
    });
    asalElements.forEach(element => {
      element.classList.remove('ditandai');
    });
    noElements.forEach(element => {
      element.classList.remove('ditandai');
    });
  }

  
  function munculkanCheck() {
    const aktifLidiButton = document.getElementById('aktif_lidi');
    aktifLidiButton.classList.toggle('active');
    aktifLidiButton.textContent = aktifLidiButton.classList.contains('active') ? 'Simpan Lidi' : 'Pakai Lidi';
    const resetLidiButton = document.getElementById('reset_lidi');
    resetLidiButton.style.display = aktifLidiButton.classList.contains('active') ? 'inline' : 'none';
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
      checkbox.style.display = checkbox.style.display === 'none' ? 'inline' : 'none';
    });

  }
  function toggleCheckbox(checkbox) {
    const value = checkbox.value;
    console.log("Checkbox toggled:", value);
    const [no, side] = value.split("#");
    console.log("No:", no, "Side:", side);
    if(side=="L") {
      const checkboxElement = document.getElementById(`checkbox-${no}#R`);
      if (checkboxElement.checked) {
        checkboxElement.checked = !checkboxElement.checked;
      }
      const namaElement = document.getElementById(`namaKiri-${no}`);
      const asalElement = document.getElementById(`asalKiri-${no}`);
      const noElement = document.getElementById(`noKiri-${no}`);
      const namaElementKanan = document.getElementById(`namaKanan-${no}`);
      const asalElementKanan = document.getElementById(`asalKanan-${no}`);
      const noElementKanan = document.getElementById(`noKanan-${no}`);
      if (namaElement) {
        namaElement.classList.toggle('ditandai');
        namaElementKanan.classList.remove('ditandai');
      }
      if (asalElement) {
        asalElement.classList.toggle('ditandai');
        asalElementKanan.classList.remove('ditandai');
      }
      if (noElement) {
        noElement.classList.toggle('ditandai');
        noElementKanan.classList.remove('ditandai');
      }
    } else {
      const checkboxElement = document.getElementById(`checkbox-${no}#L`);
      if (checkboxElement.checked) {
        checkboxElement.checked = !checkboxElement.checked;
      }
      const namaElement = document.getElementById(`namaKanan-${no}`);
      const asalElement = document.getElementById(`asalKanan-${no}`);
      const noElement = document.getElementById(`noKanan-${no}`);
      const namaElementKiri = document.getElementById(`namaKiri-${no}`);
      const asalElementKiri = document.getElementById(`asalKiri-${no}`);
      const noElementKiri = document.getElementById(`noKiri-${no}`);
      if (namaElement) {
        namaElement.classList.toggle('ditandai');
        namaElementKiri.classList.remove('ditandai');
      }
      if (asalElement) {
        asalElement.classList.toggle('ditandai');
        asalElementKiri.classList.remove('ditandai');
      }
      if (noElement) {
        noElement.classList.toggle('ditandai');
        noElementKiri.classList.remove('ditandai');
      }
    }
    localStorage.setItem(no, side);
  }
</script>
</div>
<style>
  div {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: flex-start; /* dari center -> kiri */
    align-items: center;
    margin: 20px 0;
  }

  input[type="text"],
  select {
    padding: 10px 14px;
    border: 2px solid #ddd;
    border-radius: 12px;
    font-size: 14px;
    transition: all 0.3s ease;
    min-width: 200px;
  }

  input[type="text"]:focus,
  select:focus {
    outline: none;
    border-color: #3f51b5;
    box-shadow: 0 0 8px rgba(63, 81, 181, 0.3);
  }

  .btn-download {
    padding: 10px 20px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(90deg, #ff9800, #e91e63, #3f51b5);
    color: white;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.3s ease;
  }

  .btn-download:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
  }
</style>

<style>
  .btn-download {
    background-color: #4CAF50; /* hijau */
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
  }

  .btn-download:hover {
    background-color: #45a049; /* hijau lebih gelap */
    transform: scale(1.05);
  }

  .btn-download:active {
    background-color: #3e8e41;
    transform: scale(0.98);
  }
</style>

  <!-- Tabel Data -->
  <table id="jalurTable" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <thead>
      <tr>
        <td style="text-align: center;"><?php require __DIR__ . '/counter.php'; ?>
        <i class="fa fa-eye" aria-hidden="true"></i> <?= htmlspecialchars($COUNTER_TOTAL_VIEWS) ?>
        </td>
        <td colspan="5">*Data yang anda masukkan tidak dikirim ke server dan hanya tersimpan di perangkat Anda masing-masing.</td>
      </tr>
      <tr>
        <td colspan="6" style="text-align: center; font-weight: bold; background-color: #000000; color: white;"> Putaran Pertama </td>
      </tr>
      <tr style="position: sticky; top: 0; background: white; z-index: 1;">
        <th>No</th>
        <th>Nama Jalur (Kiri)</th>
        <th>Asal (Kiri)</th>
        <th>No</th>
        <th>Nama Jalur (Kanan)</th>
        <th>Asal (Kanan)</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tr><td class="ditandai_admin"></td><td colspan="5">Ditandai Admin</td></tr>
    <tr><td class="ditandai"></td><td colspan="5">Ditandai Pengguna</td></tr>
    <tr><td colspan="6">Last update: 21:40 WIB</td></tr>
  </table>

  <script>
    let jalurData = [];

    // Baca CSV langsung dari file di direktori yang sama
    fetch("jalur_hari_2.csv")
      .then(response => response.text())
      .then(text => {
        parseCSV(text);
        renderTable();
      })
      .catch(err => console.error("Gagal membaca CSV:", err));

    // Parsing CSV
    function parseCSV(text) {
      const rows = text.trim().split("\n");
      const headers = rows[0].split(",");
      jalurData = rows.slice(1).map(row => {
        const values = row.split(",");
        let obj = {};
        headers.forEach((h, i) => obj[h.trim()] = values[i]?.trim() || "");
        return obj;
      });
      // console.log(jalurData);
    }

    // Render tabel
    function renderTable() {
      const tbody = document.querySelector("#jalurTable tbody");
      tbody.innerHTML = "";
      jalurData.forEach(row => {
        let tr = document.createElement("tr");
        tr.innerHTML = `
          <td id="noKiri-${row.No}" class="${row.Pemenang=='L' ? 'ditandai_admin' : localStorage.getItem(`${row.No}`)=='L' ? 'ditandai' : ''}">${row.No} 
          ${!row.Pemenang 
            ? `<input type="checkbox" 
                        id="checkbox-${row.No}#L" 
                        value="${row.No}#L" 
                        style="display: none;" 
                        onchange="toggleCheckbox(this)" 
                        ${localStorage.getItem(row.No) === 'L' ? 'checked' : ''}>`
            : ''
          }
          </td>
          <td id="namaKiri-${row.No}" class="${row.Pemenang=='L' ? 'ditandai_admin' : localStorage.getItem(`${row.No}`)=='L' ? 'ditandai' : ''}">${row.NamaKiri}</td>
          <td id="asalKiri-${row.No}" class="${row.Pemenang=='L' ? 'ditandai_admin' : localStorage.getItem(`${row.No}`)=='L' ? 'ditandai' : ''}">${row.AsalKiri}</td>
          
          <td id="noKanan-${row.No}" class="${row.Pemenang=='R' ? 'ditandai_admin' : localStorage.getItem(`${row.No}`)=='R' ? 'ditandai' : ''}">${row.No} 
          ${!row.Pemenang 
              ? `<input type="checkbox" 
                          id="checkbox-${row.No}#R" 
                          value="${row.No}#R" 
                          style="display: none;" 
                          onchange="toggleCheckbox(this)" 
                          ${localStorage.getItem(row.No) === 'R' ? 'checked' : ''}>`
              : ''
            }
            </td>
          
          <td id="namaKanan-${row.No}" class="${row.Pemenang=='R' ? 'ditandai_admin' : localStorage.getItem(`${row.No}`)=='R' ? 'ditandai' : ''}">${row.NamaKanan}</td>
          <td id="asalKanan-${row.No}" class="${row.Pemenang=='R' ? 'ditandai_admin' : localStorage.getItem(`${row.No}`)=='R' ? 'ditandai' : ''}">${row.AsalKanan}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Filter tabel
    function filterTable() {
      const inputNama = document.getElementById("searchNama").value.toLowerCase();
      const filterAsal = document.getElementById("filterAsal").value.toLowerCase();
      const tbody = document.querySelector("#jalurTable tbody");
      const trs = tbody.getElementsByTagName("tr");

      for (let i = 0; i < trs.length; i++) {
        let tds = trs[i].getElementsByTagName("td");
        let namaKiri = tds[1].textContent.toLowerCase();
        let asalKiri = tds[2].textContent.toLowerCase();
        let namaKanan = tds[4].textContent.toLowerCase();
        let asalKanan = tds[5].textContent.toLowerCase();

        let cocokNama = (namaKiri.includes(inputNama) || namaKanan.includes(inputNama));
        let cocokAsal = (filterAsal === "" || asalKiri.includes(filterAsal) || asalKanan.includes(filterAsal));

        trs[i].style.display = (cocokNama && cocokAsal) ? "" : "none";
      }
    }
  </script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
      function generatePDF() {
      const element = document.getElementById('jalurTable');
      const opt = {
      filename:     `pacujalur-${new Date().toISOString().replace(/[:.]/g, '-')}.pdf`,
      margin:       [5, 5, 5, 5],
      image:        { type: 'jpeg', quality: 0.98 },
      html2canvas:  { scale: 2 },
      jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(element).toPdf().get('pdf').save();
  }
    </script>
    <p>
  <strong>Disclaimer</strong><br>
  <em>Penggunaan Local Storage</em><br><br>
  Aplikasi ini menggunakan <em>Local Storage</em> pada perangkat Anda untuk menyimpan data sementara, seperti hasil undian atau catatan jalur.<br>
  Data tidak dikirim ke server dan hanya tersimpan di perangkat Anda masing-masing.<br>
  Penghapusan riwayat browser, cache, atau penggunaan perangkat lain dapat menyebabkan data hilang.<br><br>
  Dengan menggunakan aplikasi ini, Anda dianggap telah memahami dan menyetujui ketentuan di atas.
</p>
</body>

<footer>
  <p>&copy; 2025 Aduan Pacu Jalur. Versi 1.0-Beta</p>
  <p> Contact Center: <a href="https://wa.me/6282172049622">+6282172049622</a></p>
</footer>
</html>
